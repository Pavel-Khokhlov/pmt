---
import array from "@d/dataServices.js";
---

<section class="section _service" id="service">
  <h2 class="section__title _black">Мои услуги</h2>
  {
    array.map(
      (item: {
        id: string;
        title: string;
        text_one: string;
        image: string;
        indications: string[];
      }) => (
        <div class="service__block" id={`block${item.id}`}>
          <button type="button" class="service__button" id={`${item.id}`}>
            <h2 id={`question${item.id}`} class="service__question">
              {item.title}
            </h2>
          </button>
          <div id={`answer${item.id}`} class="service__answer">
            <p class="service__text">{item.text_one}</p>
            <img
              src={`../assets/images/service/${item.image}.webp`}
              class="service__image"
            />
            <h3 class="service__subtitle">Показания:</h3>
            <ul class="service__list">
              {item.indications.map((ind) => (
                <li class="service__list_item"> - {ind}</li>
              ))}
            </ul>
          </div>
        </div>
      )
    )
  }
</section>

<script>
  const arrButtons = document.querySelectorAll(".service__button");

  function handleButtonClick(e: { target: any }) {
    const $el = e.target as any;
    const $elQuestion = document.getElementById(`question${$el.id}`);
    const $elAnswer = document.getElementById(`answer${$el.id}`);
    $elQuestion && $elQuestion.classList.toggle("_active");
    $elAnswer && $elAnswer.classList.toggle("_active");
  }
  arrButtons.forEach((b) =>
    b.addEventListener("click", (e) => handleButtonClick(e))
  );
</script>

<style lang="sass">
  .service
    &__list
      display: flex
      flex-direction: column
      gap: min(10px, 3vw)
      margin-bottom: 20px
      &_item
        font-family: 'Trebuchet'
        font-size: min(18px, 4.5vw)
        line-height: 1.3
    &__block
      background: var(--color-white)
      // height: min(70px, 12vw)
      transition: all 0.5s ease
      border-radius: 10px
      box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.1)
      overflow: hidden
      padding: 0 min(40px, 3vw)
      &._active
        height: auto
        transition: all 0.5s ease
        padding-bottom: min(30px, 5vw)
    &__button
      position: relative
      margin: 0
      padding: 0
      display: flex
      align-items: center
      width: 100%
      height: min(67px, 15vw)
      cursor: pointer
      border: none
      background: transparent
    &__title
      margin: 0
      font-size: min(30px, 5.5vw)
      font-weight: 500
    &__icon
      transition: all 0.5s ease
      &._active
        transform: rotate(180deg)
        transition: all 0.5s ease
    &__image
      display: block
      width: min(400px, 100%)
      margin: min(30px, 6vw) auto
      border-radius: min(20px, 2vw)
      box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2)
    &__text
      margin-top: min(30px, 6vw)
      font-family: 'Trebuchet'
      font-size: min(18px, 4.5vw)
      line-height: 1.3
      text-indent: 30px
    &__question
      color: var(--birka-black)
      font-size: min(24px, 5vw)
      line-height: 1.5
      font-weight: 400
      text-align: start
      pointer-events: none
      &._active::after
        opacity: 0
        transform: rotate(90deg)
        transition: all .5s ease
      &::before
        right: 0
        top: calc(50% - 1px)
        width: 20px
        height: 2px
        @media screen and (max-width: 500px)
          width: 14px
      &::after
        right: 9px
        top: calc(50% - 10px)
        width: 2px
        height: 20px
        transform-origin: center center
        transition: .5s
        transition-property: transform opacity
        opacity: 1
        @media screen and (max-width: 500px)
          height: 14px
          top: calc(50% - 7px)
          right: 6px
      &::after, &::before
        content: ""
        position: absolute
        background-color: var(--color-brown)
        border-radius: 1px
    &__answer
      max-height: 0
      overflow: hidden
      scale-y: 0
      opacity: 0
      transition: all .5s ease
      &._active
        max-height: max-content
        scale-y: 1
        opacity: 1
        transition: all .5s ease
        padding-bottom: 10px
    &__subtitle
      margin-bottom: 10px
</style>
